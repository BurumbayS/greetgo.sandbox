<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

  <changeSet author="pompei" id="create-table-tmp_clients">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_clients (
        id varchar(50) not null primary key,
        surname varchar(300) not null,
        name varchar(300) not null,
        patronymic varchar(300),
        gender varchar(10) not null,
        birth_date date not null,
        charm varchar(100) not null,

        actual smallint not null default 0,
        cia_id varchar(100)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="pompei" id="create-table-tmp_charms">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_charms (
        id int not null primary key,
        name varchar(255) not null,
        description varchar(255),
        energy float,

        actual smallint not null default 0,
        cia_id varchar(100)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="pompei" id="create-table-tmp_adresses">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_adresses (
        id bigserial primary key,
        adressType varchar(10) default 'NONE',
        street varchar(255) not null,
        house varchar(255) not null,
        flat varchar(255) not null,
        client_id varchar(50) references tmp_clients(id),

        actual smallint not null default 0,
        cia_id varchar(100)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="pompei" id="create-table-tmp_phones">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_phones (
        number varchar(100) not null primary key,
        phoneType varchar(10) not null,
        client_id varchar(50) references tmp_clients(id),

        actual smallint not null default 0,
        cia_id varchar(100)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="pompei" id="create-table-tmp_accounts">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_accounts (
        id bigserial primary key,
        number varchar(100) not null,
        money float default 0,
        registered_at timestamp not null,
        client_id varchar(100) references tmp_clients(id)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="pompei" id="create-table-tmp_transaction_types">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_transaction_types (
        id bigserial primary key,
        code varchar(200),
        name varchar(200)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="pompei" id="create-table-tmp_transactions">
    <sql endDelimiter=";;"><![CDATA[
      create table tmp_transactions (
        id bigserial primary key,
        money float default 0,
        finished_at timestamp,
        account_id bigint references tmp_accounts(id),
        transaction_type_id bigint references tmp_transaction_types(id)
      )
    ]]></sql>
  </changeSet>

</databaseChangeLog>
